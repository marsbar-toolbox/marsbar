
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Making a patch &#8212; MarsBaR 0.44 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/marsbar.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">MarsBaR 0.44 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Making a patch</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="making-a-patch">
<h1>Making a patch<a class="headerlink" href="#making-a-patch" title="Permalink to this headline">¶</a></h1>
<p>You’ve discovered a bug or something else you want to change in <a class="reference external" href="http://marsbar.sourceforge.net">marsbar</a> - excellent!</p>
<p>You’ve worked out a way to fix it - even better!</p>
<p>You want to tell us about it - best of all!</p>
<p>The easiest way is to make a <em>patch</em> or set of patches.  Here we explain
how.  Making a patch is the simplest and quickest, but if you’re going
to be doing anything more than simple quick things, please consider
following the <a class="reference internal" href="git_development.html#git-development"><span class="std std-ref">Git for development</span></a> model instead.</p>
<div class="section" id="making-patches">
<span id="id1"></span><h2>Making patches<a class="headerlink" href="#making-patches" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">tell</span> <span class="n">git</span> <span class="n">who</span> <span class="n">you</span> <span class="n">are</span>
<span class="n">git</span> <span class="s">config</span> <span class="s">--global</span> <span class="s">user.email</span> <span class="s">you@yourdomain.example.com</span>
<span class="n">git</span> <span class="s">config</span> <span class="s">--global</span> <span class="s">user.name</span> <span class="s">&quot;Your</span> <span class="s">Name</span> <span class="s">Comes</span> <span class="s">Here&quot;</span>
# <span class="n">get</span> <span class="n">the</span> <span class="n">repository</span> <span class="k">if</span> <span class="n">you</span> <span class="n">don</span><span class="o">&#39;</span><span class="n">t</span> <span class="n">have</span> <span class="n">it</span>
<span class="n">git</span> <span class="s">clone</span> <span class="s">git://github.com/matthew-brett/marsbar.git</span>
# <span class="n">make</span> <span class="n">a</span> <span class="n">branch</span> <span class="k">for</span> <span class="n">your</span> <span class="n">patching</span>
<span class="n">cd</span> <span class="s">marsbar</span>
<span class="n">git</span> <span class="s">branch</span> <span class="s">the-fix-im-thinking-of</span>
<span class="n">git</span> <span class="s">checkout</span> <span class="s">the-fix-im-thinking-of</span>
# <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span>
# <span class="n">Tell</span> <span class="n">git</span> <span class="n">about</span> <span class="n">any</span> <span class="n">new</span> <span class="n">files</span> <span class="n">you</span><span class="o">&#39;</span><span class="n">ve</span> <span class="n">made</span>
<span class="n">git</span> <span class="s">add</span> <span class="s">somewhere/tests/test_my_bug.py</span>
# <span class="n">commit</span> <span class="n">work</span> <span class="n">in</span> <span class="n">progress</span> <span class="n">as</span> <span class="n">you</span> <span class="n">go</span>
<span class="n">git</span> <span class="s">commit</span> <span class="s">-am</span> <span class="s">&#39;BF - added tests for Funny bug&#39;</span>
# <span class="n">hack</span> <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span>
<span class="n">git</span> <span class="s">commit</span> <span class="s">-am</span> <span class="s">&#39;BF - added fix for Funny bug&#39;</span>
# <span class="n">make</span> <span class="n">the</span> <span class="n">patch</span> <span class="n">files</span>
<span class="n">git</span> <span class="s">format-patch</span> <span class="s">-M</span> <span class="s">-C</span> <span class="s">master</span>
</pre></div>
</div>
<p>Then, send the generated patch files to the <a class="reference external" href="https://lists.sourceforge.net/lists/listinfo/marsbar-users">marsbar mailing list</a> - where we will thank you warmly.</p>
</div>
<div class="section" id="in-detail">
<h3>In detail<a class="headerlink" href="#in-detail" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Tell <a class="reference external" href="http://git-scm.com/">git</a> who you are so it can label the commits you’ve made:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">config</span> <span class="s">--global</span> <span class="s">user.email</span> <span class="s">you@yourdomain.example.com</span>
<span class="n">git</span> <span class="s">config</span> <span class="s">--global</span> <span class="s">user.name</span> <span class="s">&quot;Your</span> <span class="s">Name</span> <span class="s">Comes</span> <span class="s">Here&quot;</span>
</pre></div>
</div>
</li>
<li><p>If you don’t already have one, clone a copy of the <a class="reference external" href="http://marsbar.sourceforge.net">marsbar</a> repository:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">clone</span> <span class="s">git://github.com/matthew-brett/marsbar.git</span>
<span class="n">cd</span> <span class="s">marsbar</span>
</pre></div>
</div>
</li>
<li><p>Make a ‘feature branch’.  This will be where you work on your bug
fix.  It’s nice and safe and leaves you with access to an unmodified
copy of the code in the main branch:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">branch</span> <span class="s">the-fix-im-thinking-of</span>
<span class="n">git</span> <span class="s">checkout</span> <span class="s">the-fix-im-thinking-of</span>
</pre></div>
</div>
</li>
<li><p>Do some edits, and commit them as you go:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span>
# <span class="n">Tell</span> <span class="n">git</span> <span class="n">about</span> <span class="n">any</span> <span class="n">new</span> <span class="n">files</span> <span class="n">you</span><span class="o">&#39;</span><span class="n">ve</span> <span class="n">made</span>
<span class="n">git</span> <span class="s">add</span> <span class="s">somewhere/tests/test_my_bug.py</span>
# <span class="n">commit</span> <span class="n">work</span> <span class="n">in</span> <span class="n">progress</span> <span class="n">as</span> <span class="n">you</span> <span class="n">go</span>
<span class="n">git</span> <span class="s">commit</span> <span class="s">-am</span> <span class="s">&#39;BF - added tests for Funny bug&#39;</span>
# <span class="n">hack</span> <span class="n">hack</span><span class="p">,</span> <span class="n">hack</span>
<span class="n">git</span> <span class="s">commit</span> <span class="s">-am</span> <span class="s">&#39;BF - added fix for Funny bug&#39;</span>
</pre></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">-am</span></code> options to <code class="docutils literal notranslate"><span class="pre">commit</span></code>. The <code class="docutils literal notranslate"><span class="pre">m</span></code> flag just signals
that you’re going to type a message on the command line.  The <code class="docutils literal notranslate"><span class="pre">a</span></code>
flag - you can just take on faith - or see <a class="reference external" href="http://www.gitready.com/beginner/2009/01/18/the-staging-area.html">why the -a flag?</a>.</p>
</li>
<li><p>When you have finished, check you have committed all your changes:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">status</span>
</pre></div>
</div>
</li>
<li><p>Finally, make your commits into patches.  You want all the commits
since you branched from the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">format-patch</span> <span class="s">-M</span> <span class="s">-C</span> <span class="s">master</span>
</pre></div>
</div>
<p>You will now have several files named for the commits:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="mi">0001</span><span class="o">-</span><span class="n">BF</span><span class="o">-</span><span class="n">added</span><span class="o">-</span><span class="n">tests</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">Funny</span><span class="o">-</span><span class="n">bug</span><span class="p">.</span><span class="n">patch</span>
<span class="mi">0002</span><span class="o">-</span><span class="n">BF</span><span class="o">-</span><span class="n">added</span><span class="o">-</span><span class="nb">fix</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">Funny</span><span class="o">-</span><span class="n">bug</span><span class="p">.</span><span class="n">patch</span>
</pre></div>
</div>
<p>Send these files to the <a class="reference external" href="https://lists.sourceforge.net/lists/listinfo/marsbar-users">marsbar mailing list</a>.</p>
</li>
</ol>
<p>When you are done, to switch back to the main copy of the code, just
return to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="s">checkout</span> <span class="s">master</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="moving-from-patching-to-development">
<h2>Moving from patching to development<a class="headerlink" href="#moving-from-patching-to-development" title="Permalink to this headline">¶</a></h2>
<p>If you find you have done some patches, and you have one or more feature
branches, you will probably want to switch to development mode.  You can
do this with the repository you have.</p>
<p>Fork the <a class="reference external" href="http://marsbar.sourceforge.net">marsbar</a> repository on <a class="reference external" href="http://github.com">github</a> - <a class="reference internal" href="forking_hell.html#forking"><span class="std std-ref">Making your own copy (fork) of marsbar</span></a>.  Then:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span># <span class="n">checkout</span> <span class="n">and</span> <span class="n">refresh</span> <span class="n">master</span> <span class="n">branch</span> <span class="n">from</span> <span class="n">main</span> <span class="n">repo</span>
<span class="n">git</span> <span class="s">checkout</span> <span class="s">master</span>
<span class="n">git</span> <span class="s">pull</span> <span class="s">origin</span> <span class="s">master</span>
# <span class="n">rename</span> <span class="n">pointer</span> <span class="n">to</span> <span class="n">main</span> <span class="n">repository</span> <span class="n">to</span> <span class="s">&#39;upstream&#39;</span>
<span class="n">git</span> <span class="s">remote</span> <span class="s">rename</span> <span class="s">origin</span> <span class="s">upstream</span>
# <span class="n">point</span> <span class="n">your</span> <span class="n">repo</span> <span class="n">to</span> <span class="n">default</span> <span class="n">read</span> <span class="o">/</span> <span class="n">write</span> <span class="n">to</span> <span class="n">your</span> <span class="n">fork</span> <span class="n">on</span> <span class="n">github</span>
<span class="n">git</span> <span class="s">remote</span> <span class="s">add</span> <span class="s">origin</span> <span class="s">git@github.com:your-user-name/marsbar.git</span>
# <span class="n">push</span> <span class="n">up</span> <span class="n">any</span> <span class="n">branches</span> <span class="n">you</span><span class="o">&#39;</span><span class="n">ve</span> <span class="n">made</span> <span class="n">and</span> <span class="n">want</span> <span class="n">to</span> <span class="n">keep</span>
<span class="n">git</span> <span class="s">push</span> <span class="s">origin</span> <span class="s">the-fix-im-thinking-of</span>
</pre></div>
</div>
<p>Then you can, if you want, follow the <a class="reference internal" href="development_workflow.html#development-workflow"><span class="std std-ref">Development workflow</span></a>.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Making a patch</a><ul>
<li><a class="reference internal" href="#making-patches">Making patches</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#in-detail">In detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moving-from-patching-to-development">Moving from patching to development</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/development/gitwash/patching.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">MarsBaR 0.44 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Making a patch</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2015, Matthew Brett.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.3.
    </div>
  </body>
</html>