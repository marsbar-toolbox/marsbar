
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Getting started &#8212; MarsBaR 0.45 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/marsbar.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The MarsBaR / SPM interface" href="interface.html" />
    <link rel="prev" title="MarsBaR tutorial" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="interface.html" title="The MarsBaR / SPM interface"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MarsBaR tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MarsBaR 0.45 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">MarsBaR tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting started</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-to-read-the-tutorial">
<h2>How to read the tutorial<a class="headerlink" href="#how-to-read-the-tutorial" title="Permalink to this headline">¶</a></h2>
<p>There are three threads in this tutorial. The first and most obvious is
a step by step guide to running several standard ROI analyses.  On the
way, there are two sets of diversions. These are <em>interface summaries</em>,
and <em>technical notes</em>. Interface summaries look like this:</p>
<div class="interfacenote note admonition">
<p class="admonition-title">An interface summary</p>
<p>with some interface description</p>
</div>
<p>and technical notes look like this:</p>
<div class="technote note admonition">
<p class="admonition-title">A technical note</p>
<p>with some technical notes</p>
</div>
<p>If you just want to do the step-by-step tutorial, you can skip these
diversions, and come back to them later. The interface summaries give
you information on the range of things that MarsBaR can do; the
technical notes are detailed explanations of the workings of MarsBaR,
which can be useful in understanding the obscure parts of the
interface.</p>
</div>
<div class="section" id="gearing-up">
<h2>Gearing up<a class="headerlink" href="#gearing-up" title="Permalink to this headline">¶</a></h2>
<p>To run all the examples in this tutorial you will need to download and install
two packages:</p>
<ol class="arabic simple">
<li><p>MarsBaR: this tutorial assumes marsbar version &gt;= 0.44;</p></li>
<li><p>the example dataset (version &gt;=0.3).</p></li>
</ol>
<p>To install these packages, see <a class="reference internal" href="../download.html#download-install"><span class="std std-ref">Download and install</span></a></p>
<p>This tutorial assumes you are using SPM8, but you can run the tutorial with
SPM versions 12, 8, 5, 2 or 99; the results will be very similar.</p>
</div>
<div class="section" id="plan-of-campaign">
<h2>Plan of campaign<a class="headerlink" href="#plan-of-campaign" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../download.html#example-data"><span class="std std-ref">Example dataset</span></a> is from an experiment with three EPI runs of
flashing checkerboard events.  The first run was at a high presentation
rate (average 1 per second), run 2 was at a medium rate (average 1 every
3 seconds) and run 3 was slow (1 every 10 seconds on average).</p>
<p>We are going to analyse the data to see if there is different activation for
fast and slow presentation rates. ROI analysis is an obvious choice here,
because we know where the activation is likely to be – in the primary visual
cortex – but we are more interested in how much activation there will be. So,
we will first need to define an ROI for the visual cortex, and then analyze the
data within the ROI.</p>
<p>In this tutorial we will cover two methods of defining an ROI: first, a
functional definition and second, an anatomical definition.</p>
</div>
<div class="section" id="defining-a-functional-roi">
<h2>Defining a functional ROI<a class="headerlink" href="#defining-a-functional-roi" title="Permalink to this headline">¶</a></h2>
<p>A key problem in an ROI analysis is finding the right ROI. This is easier for
the visual cortex than for almost any other functional area, because the
location of the visual cortex is fairly well predicted by the calcarine sulcus,
in the occipital lobe, which is easy enough to define on a structural scan.
However, there is a moderate degree of individual variation in the size and
border of the primary visual cortex.</p>
<p>One approach to this problem is to use the subject’s own activation pattern to
define the ROI. We might ask the subject to do another visual task in the
scanner, and use SPM to detect the activated areas. We find the subject’s
primary visual cortex from the activation map, and use this functional ROI to
analyze other data from the same subject. This approach has been very fruitful
for areas such as the fusiform face area, which vary a great deal in position
between subjects.</p>
<p>For this dataset, we are most interested in the difference between the fast
presentation rates of run 1, and the slow presentation rates of run 3. So, we
can use an SPM analysis of run 2 to define the visual cortex, and use this as
an ROI for our analysis of run 1 and run 3.</p>
</div>
<div class="section" id="functional-rois-usually-need-independent-data">
<h2>Functional ROIs usually need independent data<a class="headerlink" href="#functional-rois-usually-need-independent-data" title="Permalink to this headline">¶</a></h2>
<p>Using the recipe above, we are not using run 2 for the ROI analysis. Because
we will use run 2 to define the ROI, if we extract data from this ROI for run
2, it will be biased to be more activated than the data from run 1 and run 3.
Imagine that our experiment had not worked, and there was no real activation
in any of the runs. We do an SPM analysis on run 2, and drop the threshold to
find some voxels with higher signal than others due to noise. We define the
ROI using this noise cluster, and extract data from the ROI for this session,
and the other two sessions. The activation signal from the ROI in run 2 will
probably appear to be higher than for the other sessions, because we selected
these voxels beforehand to have high signal for run 2. The same argument
applies if we select the ROI from a truly activated area; the exact choice of
voxels will depend to some extent on the noise in this session, and so data
extracted from this ROI, for this session, will be biased to have high signal.</p>
</div>
<div class="section" id="starting-the-tutorial">
<span id="tutorial-processing"></span><h2>Starting the tutorial<a class="headerlink" href="#starting-the-tutorial" title="Permalink to this headline">¶</a></h2>
<p>First you will need to run some processing on the example dataset. After
you unpack the dataset archive, you should have four subdirectories in
the main <code class="docutils literal notranslate"><span class="pre">marsbar_example_data</span></code> directory. Directories <code class="docutils literal notranslate"><span class="pre">sess1</span></code>,
<code class="docutils literal notranslate"><span class="pre">sess2</span></code> and <code class="docutils literal notranslate"><span class="pre">sess3</span></code> contain the slice-time corrected and realigned,
undistorted, spatially normalized data for the three sessions (runs) of
the experiment. The <code class="docutils literal notranslate"><span class="pre">rois</span></code> directory contains pre-defined regions of
interest.</p>
<p>To run the tutorial, find where your marsbar directory is. You can do
this from the matlab prompt with <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span> <span class="pre">which</span> <span class="pre">marsbar</span></code> . If <code class="docutils literal notranslate"><span class="pre">&lt;marsbar&gt;</span></code>
is the marsbar directory, then you should be able to see a directory
called <code class="docutils literal notranslate"><span class="pre">&lt;marsbar&gt;/examples/batch</span></code>. This <code class="docutils literal notranslate"><span class="pre">batch</span></code> subdirectory contains
Matlab program files to run the preprocessing. Change directory to
<code class="docutils literal notranslate"><span class="pre">batch</span></code>, and start Matlab.  From the Matlab prompt, run the command
<code class="docutils literal notranslate"><span class="pre">run_preprocess</span></code>. This little script will smooth the images by 8mm
FWHM, and run SPM models for each run.</p>
<p>Now start MarsBaR.  First, make sure the MarsBaR directory is on the Matlab
path.  If you are using the GUI to add marsbar to the path, add only the path
containing <code class="docutils literal notranslate"><span class="pre">marsbar.m</span></code>, but <em>not</em> the subdirectories in this directory.
Next, run the command <code class="docutils literal notranslate"><span class="pre">marsbar</span></code> from the Matlab <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> prompt.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#how-to-read-the-tutorial">How to read the tutorial</a></li>
<li><a class="reference internal" href="#gearing-up">Gearing up</a></li>
<li><a class="reference internal" href="#plan-of-campaign">Plan of campaign</a></li>
<li><a class="reference internal" href="#defining-a-functional-roi">Defining a functional ROI</a></li>
<li><a class="reference internal" href="#functional-rois-usually-need-independent-data">Functional ROIs usually need independent data</a></li>
<li><a class="reference internal" href="#starting-the-tutorial">Starting the tutorial</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">MarsBaR tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interface.html"
                        title="next chapter">The MarsBaR / SPM interface</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorial/gettingstarted.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="interface.html" title="The MarsBaR / SPM interface"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="MarsBaR tutorial"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MarsBaR 0.45 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MarsBaR tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting started</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2015, Matthew Brett.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
  </body>
</html>