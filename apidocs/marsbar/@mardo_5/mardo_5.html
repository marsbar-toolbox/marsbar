<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of mardo_5</title>
  <meta name="keywords" content="mardo_5">
  <meta name="description" content="class constructor for SPM5 MarsBaR design object">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">marsbar</a> &gt; <a href="index.html">@mardo_5</a> &gt; mardo_5.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for marsbar/@mardo_5&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>mardo_5
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>class constructor for SPM5 MarsBaR design object</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [o, others] = mardo_5(params, others, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> class constructor for SPM5 MarsBaR design object
 FORMAT [o, others] = mardo_5(params, others, varargin)
 Inputs
 params  - structure,containing fields, or SPM/MarsBaR design
 others  - structure, containing other fields to define

 Outputs
 o       - mardo_5 object (unless disowned)
 others  - any unrecognized fields from params, for processing by
           children

 This object is called from the mardo object contructor
 with a mardo object as input.  mardo_5 checks to see
 if the contained design is an SPM5 design, returns
 the object unchanged if not.  If it is an SPM5
 design, it claims ownership of the passed object.

 The constructor can also be called to give class functions, where the
 name of the class function is a character string which is one of:
    'spm_filter' - applies spm_filter routine to passed args
 
 $Id: mardo_5.m 607 2006-03-30 20:54:55Z matthewbrett $
</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../marsbar/@mardo/des_struct.html" class="code" title="function res = des_struct(obj, Struct)">des_struct</a>	get/set method for des_struct field</li>
<li><a href="../../marsbar/@mardo/isempty.html" class="code" title="function tf = isempty(o)">isempty</a>	overloaded isempty method for mardo object</li>
<li><a href="../../marsbar/@mardo_2/convert_vols.html" class="code" title="function o = convert_vols(o, ver)">convert_vols</a>	method that converts vol structs in design and converts to format 'ver'</li>
<li><a href="../../marsbar/@mardo_2/mardo_2.html" class="code" title="function [o, others] = mardo_2(params, others, varargin)">mardo_2</a>	class constructor for SPM2 MarsBaR design object</li>
<li><a href="../../marsbar/@mardo_2/private/my_design.html" class="code" title="function tf = my_design(des)">my_design</a>	returns 1 if design looks like it is of SPM99 type</li>
<li><a href="../../marsbar/@mardo_2/private/pr_spm_filter.html" class="code" title="function [vargout] = pr_spm_filter(K,Y)">pr_spm_filter</a>	Removes low frequency confounds X0</li>
<li><a href="convert_vols.html" class="code" title="function o = convert_vols(o, ver)">convert_vols</a>	method that converts vol structs in design and converts to format 'ver'</li>
<li><a href="../../marsbar/@mardo_5/private/my_design.html" class="code" title="function tf = my_design(des)">my_design</a>	returns 1 if design looks like it is of SPM5 / 8 type</li>
<li><a href="../../marsbar/@mardo_5/private/pr_spm_filter.html" class="code" title="function [argout] = pr_spm_filter(K,Y)">pr_spm_filter</a>	Removes low frequency confounds X0</li>
<li><a href="../../marsbar/@mardo_99/convert_vols.html" class="code" title="function o = convert_vols(o, ver)">convert_vols</a>	method that converts vol structs in design and converts to format 'ver'</li>
<li><a href="../../marsbar/@mardo_99/mardo_2.html" class="code" title="function o = mardo_2(o)">mardo_2</a>	method to convert SPM2 design to SPM99 design</li>
<li><a href="../../marsbar/@mardo_99/private/my_design.html" class="code" title="function tf = my_design(des)">my_design</a>	returns 1 if design looks like it is of SPM99 type</li>
<li><a href="../../marsbar/@mardo_99/private/pr_spm_filter.html" class="code" title="function [vargout] = pr_spm_filter(Action,K,Y)">pr_spm_filter</a>	contruct and/or apply high and/or low pass filter</li>
<li><a href="../../marsbar/mars_struct.html" class="code" title="function varargout = mars_struct(action, varargin)">mars_struct</a>	multifunction function for manipulating structures</li>
<li><a href="../../marsbar/marsbar.html" class="code" title="function varargout=marsbar(varargin)">marsbar</a>	Startup, callback and utility routine for Marsbar</li>
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../marsbar/@mardo/mardo.html" class="code" title="function [o, others] = mardo(params, others, passf)">mardo</a>	mardo - class constructor for MarsBaR design object</li>
<li><a href="../../marsbar/spm5/mars_veropts.html" class="code" title="function varargout = mars_veropts(arg, varargin)">mars_veropts</a>	returns SPM version specific parameters</li>
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [o, others] = mardo_5(params, others, varargin)</a>
0002 <span class="comment">% class constructor for SPM5 MarsBaR design object</span>
0003 <span class="comment">% FORMAT [o, others] = mardo_5(params, others, varargin)</span>
0004 <span class="comment">% Inputs</span>
0005 <span class="comment">% params  - structure,containing fields, or SPM/MarsBaR design</span>
0006 <span class="comment">% others  - structure, containing other fields to define</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Outputs</span>
0009 <span class="comment">% o       - mardo_5 object (unless disowned)</span>
0010 <span class="comment">% others  - any unrecognized fields from params, for processing by</span>
0011 <span class="comment">%           children</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% This object is called from the mardo object contructor</span>
0014 <span class="comment">% with a mardo object as input.  mardo_5 checks to see</span>
0015 <span class="comment">% if the contained design is an SPM5 design, returns</span>
0016 <span class="comment">% the object unchanged if not.  If it is an SPM5</span>
0017 <span class="comment">% design, it claims ownership of the passed object.</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% The constructor can also be called to give class functions, where the</span>
0020 <span class="comment">% name of the class function is a character string which is one of:</span>
0021 <span class="comment">%    'spm_filter' - applies spm_filter routine to passed args</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% $Id: mardo_5.m 607 2006-03-30 20:54:55Z matthewbrett $</span>
0024 
0025 myclass = <span class="string">'mardo_5'</span>;
0026 cvs_v   = <a href="../../marsbar/marsbar.html" class="code" title="function varargout=marsbar(varargin)">marsbar</a>(<span class="string">'ver'</span>); <span class="comment">% was CVS version; now marsbar version</span>
0027 
0028 <span class="comment">% Default object structure</span>
0029 defstruct = [];
0030 
0031 <span class="keyword">if</span> nargin &lt; 1
0032   defstruct.cvs_version = cvs_v;
0033   o = class(defstruct, myclass, <a href="../../marsbar/@mardo_2/mardo_2.html" class="code" title="function [o, others] = mardo_2(params, others, varargin)">mardo_2</a>);
0034   others = [];
0035   <span class="keyword">return</span>
0036 <span class="keyword">end</span>
0037 <span class="keyword">if</span> nargin &lt; 2
0038   others = [];
0039 <span class="keyword">end</span>
0040 
0041 <span class="comment">% parse out string action calls (class functions)</span>
0042 <span class="keyword">if</span> ischar(params)
0043   <span class="keyword">switch</span> params
0044    <span class="keyword">case</span> <span class="string">'spm_filter'</span>
0045     <span class="keyword">if</span> nargin &lt; 2
0046       error(<span class="string">'Need filter'</span>);
0047     <span class="keyword">elseif</span> nargin &lt; 3
0048       o = <a href="../../marsbar/@mardo_2/private/pr_spm_filter.html" class="code" title="function [vargout] = pr_spm_filter(K,Y)">pr_spm_filter</a>(others);
0049     <span class="keyword">else</span>
0050       o = <a href="../../marsbar/@mardo_2/private/pr_spm_filter.html" class="code" title="function [vargout] = pr_spm_filter(K,Y)">pr_spm_filter</a>(others, varargin{1});
0051     <span class="keyword">end</span>
0052     <span class="keyword">return</span>
0053   <span class="keyword">otherwise</span>
0054     error(sprintf(<span class="string">'Is &quot;%s&quot; a filename? Use ``mardo`` to load from files'</span>,<span class="keyword">...</span>
0055             params));
0056   <span class="keyword">end</span>
0057 <span class="keyword">end</span>
0058     
0059 <span class="comment">% Deal with passed objects of this (or child) class</span>
0060 <span class="keyword">if</span> isa(params, myclass)
0061   o = params;
0062   <span class="comment">% Check for simple form of call</span>
0063   <span class="keyword">if</span> <a href="../../marsbar/@mardo/isempty.html" class="code" title="function tf = isempty(o)">isempty</a>(others), <span class="keyword">return</span>, <span class="keyword">end</span>
0064 
0065   <span class="comment">% Otherwise, we are being asked to set fields of object</span>
0066   <span class="comment">% (Moot at the moment, as there are no fields specific for this object)</span>
0067   [p others] = <a href="../../marsbar/mars_struct.html" class="code" title="function varargout = mars_struct(action, varargin)">mars_struct</a>(<span class="string">'split'</span>, others, defstruct);
0068   <span class="keyword">return</span>
0069 <span class="keyword">end</span>
0070 
0071 <span class="comment">% normal call is via mardo constructor</span>
0072 <span class="keyword">if</span> isa(params, <span class="string">'mardo'</span>)
0073   <span class="comment">% Check to see if this is a suitable design, return if not</span>
0074   des = <a href="../../marsbar/@mardo/des_struct.html" class="code" title="function res = des_struct(obj, Struct)">des_struct</a>(params);
0075   <span class="keyword">if</span> ~<a href="../../marsbar/@mardo_2/private/my_design.html" class="code" title="function tf = my_design(des)">my_design</a>(des), o = params; <span class="keyword">return</span>, <span class="keyword">end</span>
0076   <span class="comment">% own, by making mardo_2 object for design</span>
0077   [uo others] = <a href="../../marsbar/@mardo_2/mardo_2.html" class="code" title="function [o, others] = mardo_2(params, others, varargin)">mardo_2</a>(params, others, 1);
0078   params = [];
0079 <span class="keyword">else</span>
0080   uo = [];
0081 <span class="keyword">end</span>
0082 
0083 <span class="keyword">if</span> ~isa(uo, <span class="string">'mardo'</span>) <span class="comment">% mardo object not passed</span>
0084   <span class="comment">% umbrella object, parse out fields for (this object and children)</span>
0085   <span class="comment">% third argument of 0 prevents recursive call back to here</span>
0086   [uo, params] = <a href="../../marsbar/@mardo_2/mardo_2.html" class="code" title="function [o, others] = mardo_2(params, others, varargin)">mardo_2</a>(params, others, 0);
0087 <span class="keyword">else</span>
0088   <span class="comment">% fill params with other parameters</span>
0089   params = <a href="../../marsbar/mars_struct.html" class="code" title="function varargout = mars_struct(action, varargin)">mars_struct</a>(<span class="string">'ffillmerge'</span>, params, others);
0090 <span class="keyword">end</span>  
0091 
0092 <span class="comment">% parse parameters into those for this object, children</span>
0093 [params, others] = <a href="../../marsbar/mars_struct.html" class="code" title="function varargout = mars_struct(action, varargin)">mars_struct</a>(<span class="string">'ffillsplit'</span>, defstruct, params);
0094 
0095 <span class="comment">% add cvs tag</span>
0096 params.cvs_version = cvs_v;
0097 
0098 <span class="comment">% set the mardo object</span>
0099 o  = class(params, myclass, uo);
0100 
0101 <span class="comment">% convert vols to current format</span>
0102 o = <a href="convert_vols.html" class="code" title="function o = convert_vols(o, ver)">convert_vols</a>(o);
0103 
0104 <span class="keyword">return</span>
</pre></div>

<hr><address>Generated on Wed 11-May-2022 15:34:44 by <strong><a href="https://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003-2019</address>
</body>
</html>
